# 资源管理器（固定目录文档）- 需求说明

## 目标与范围
- 目标：以文件树形式管理业务资源，支持选择节点作为上下文、预览与刷新。
- 范围：分组与树结构、懒加载、节点选择/清空、预览、刷新扫描固定目录。

## 用户故事
- 作为用户，我能在资源树中选择相关文件/目录作为对话上下文。
- 作为用户，我可快速预览资源内容，并在目录变更后刷新。

## 主流程
1. 打开资源管理器，展示分组与树根。
2. 展开分组懒加载子节点；点击节点右侧“选中”将其加入当前会话上下文（可多选）。
3. 选中计数显示在资源面板；提供“清空选择”。
4. 点击预览（浮层或主窗口 Tab）查看内容摘要。
5. 点击“刷新”重新扫描固定目录并更新树。

## 关键交互
- 分组：会话、工单/任务、日志与指标、质检/实验、物料/供应链、知识库、工具入口。
- 节点选中高亮；多选计数；清空按钮一键取消全部选择。
- 预览入口可在行内或右键菜单；预览支持文本/表格/基本元数据。
- 刷新按钮 loading 状态，完成后提示“已刷新”。

## 边界与异常
- 懒加载失败显示错误并提供重试；不影响已加载节点。
- 刷新时保留当前选中节点（若仍存在），否则提示“部分资源已变更”。
- 大文件预览截断显示并提示“可下载/展开更多”（如有下载能力）。

## 非功能
- 展开/懒加载单次 < 1s；刷新固定目录扫描完成 < 5s（可配置）。
- 预览渲染 < 1s 对于小文件，截断策略避免主线程卡顿。

## 依赖
- 固定目录扫描/索引服务；资源元数据与内容获取 API。

## 验收标准
- 分组与树结构正确，懒加载可用；节点可多选、计数、清空。
- 预览可用且截断提示；刷新后树与计数同步更新。
- 选中节点与当前会话上下文绑定，在对话发送时可携带节点列表。

