# 主窗口与多 Tab - 需求说明

## 目标与范围
- 目标：在主窗口承载结果与资源视图，支持多 Tab 并行、进度展示与重试。
- 范围：Tab 管理、结果渲染（文本/表格/图表/富视图）、工具执行进度、错误重试。

## 用户故事
- 作为用户，我希望每次对话或工具结果自动打开可管理的卡片，不影响其他任务。
- 作为用户，我希望看到工具执行进度，失败后能一键重试。

## 主流程
1. 对话或工具结果默认在主窗口新开 Tab（可配置自动/手动）。
2. Tab 标题展示类型与状态（运行中/完成/失败）。
3. 运行中显示进度/步骤日志；完成后显示最终结果。
4. 失败展示错误与参数建议；提供“一键重试”沿用上次参数。
5. 用户可关闭、固定、拖拽重排 Tab。

## 关键交互
- Tab 栏显示状态点（绿完成/黄运行/红失败）。
- 右键菜单：关闭、关闭其他、固定/取消固定、重试（若支持）。
- 结果视图支持：文本富格式、表格分页、图表（基础折线/柱状）、引用卡片。
- 并行运行的 Tab 在标题区显示转圈或进度百分比。

## 边界与异常
- 并发任务过多时，提供“暂停新建 Tab”或合并策略，避免卡顿。
- 超时任务标记“已超时”，可重试；若重试仍失败，提示联系管理员。
- 结果体超大时折叠与分页展示，支持“展开更多”。

## 非功能
- Tab 切换渲染 < 200ms；进度更新不阻塞主线程。
- 并行 Tab 数量默认上限（如 10），可配置。

## 依赖
- 对话/工具执行接口；结果格式化适配器；进度推送（轮询或流式）。

## 验收标准
- 对话/工具结果可在新 Tab 正确展示，状态更新及时。
- 失败场景可见错误与建议，重试可沿用参数并成功执行（若后端正常）。
- Tab 的打开/关闭/固定/重排行为正常，无 UI 错乱。

